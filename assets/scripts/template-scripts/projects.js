jQuery(document).ready((function(a){let o=a("#load-more-button"),e=o.data("page"),t=o.data("posts-per-page"),n=a("#loading-spinner"),p=!1;function s(){n.hide(),p||o.show()}function c(){n.show(),o.hide(),a.ajax({url:ajax_object.ajaxurl,type:"POST",data:{action:"load_more_projects",page:e,postsPerPage:t},success:function(n){a("#projects-container").append(n),e++,o.data("page",e),a.ajax({url:ajax_object.ajaxurl,type:"POST",data:{action:"get_total_pages",postType:"projects",postsPerPage:t},success:function(a){e>a&&(p=!0,o.prop("disabled",!0)),s()},error:function(){console.log("Помилка при отриманні total_pages."),o.prop("disabled",!1),s()}})},error:function(){console.log("Помилка завантаження проєктів."),o.prop("disabled",!1),s()}})}c(),o.on("click",(function(){c()}))}));